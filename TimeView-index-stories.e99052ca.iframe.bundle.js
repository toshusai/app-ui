"use strict";(self.webpackChunk_toshusai_app_ui=self.webpackChunk_toshusai_app_ui||[]).push([[46],{"./src/TimeView/index.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:()=>Basic,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={component:__webpack_require__("./src/TimeView/index.tsx").Yj},Basic={args:{pxPerSec:100,offsetSec:0}};Basic.parameters={...Basic.parameters,docs:{...Basic.parameters?.docs,source:{originalSource:"{\n  args: {\n    pxPerSec: 100,\n    offsetSec: 0\n  }\n}",...Basic.parameters?.docs?.source}}};const __namedExportsOrder=["Basic"]},"./src/TimeView/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Yj:()=>TimeView});var useWidth=__webpack_require__("./src/hooks/useWidth.tsx"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function TimeText(props){return(0,jsx_runtime.jsx)(TimeTextDiv,{$left:props.left,$height:props.height,children:(0,jsx_runtime.jsx)("div",{style:{marginLeft:"2px"},children:props.time})})}TimeText.displayName="TimeText";const TimeTextDiv=styled_components_browser_esm.ZP.div.attrs((props=>({style:{left:props.$left,height:props.$height}})))`
  position: absolute;
  touch-action: none;
  pointer-events: none;
  height: 20px;
  border-left: 1px solid lightgray;
`;try{TimeText.displayName="TimeText",TimeText.__docgenInfo={description:"",displayName:"TimeText",props:{time:{defaultValue:null,description:"",name:"time",required:!0,type:{name:"string"}},left:{defaultValue:null,description:"",name:"left",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/TimeView/TimeText.tsx#TimeText"]={docgenInfo:TimeText.__docgenInfo,name:"TimeText",path:"src/TimeView/TimeText.tsx#TimeText"})}catch(__react_docgen_typescript_loader_error){}function defaultRenderText(time){let viewTime=time.toFixed(2);return viewTime.endsWith(".00")?viewTime=viewTime.slice(0,-3):viewTime.endsWith("0")&&(viewTime=viewTime.slice(0,-1)),"-0"===viewTime&&(viewTime="0"),viewTime}const secStep=[.01,.05,.1,.2,.5,1,5,10,30,60],minInterval=32;function getStepPixel(pxPerSec,minInterval,step,width,offsetSec=0){const stepI=step.findIndex((s=>s*pxPerSec>minInterval)),stepPx=step[stepI]*pxPerSec,viewNumber=Math.ceil(width/stepPx),offset=offsetSec*pxPerSec%stepPx;return isNaN(viewNumber)?[]:[...Array(viewNumber).keys()].map((i=>i*stepPx-offset))}function TimeView(props){const[width,ref]=(0,useWidth.z)(),{offsetSec,pxPerSec,renderText,steps:propsSteps,...rest}=props,steps=getStepPixel(props.pxPerSec,minInterval,propsSteps??secStep,width,props.offsetSec),pSteps=getStepPixel(props.pxPerSec,minInterval/4,propsSteps??secStep,width,props.offsetSec);return(0,jsx_runtime.jsxs)(TimeViewRootDiv,{ref,onMouseDown:props.onMouseDown,onTouchStart:props.onTouchStart,style:{height:props.height},...rest,children:[pSteps.map((left=>(0,jsx_runtime.jsx)(TimePointDiv,{$left:left},left))),steps.map((left=>{const time=left/props.pxPerSec+props.offsetSec;return(0,jsx_runtime.jsx)(TimeText,{time:renderText?renderText(time):defaultRenderText(time),height:props.height??20,left},left)}))]})}TimeView.displayName="TimeView";const TimeViewRootDiv=styled_components_browser_esm.ZP.div`
  position: relative;
  height: 20px;
  width: 100%;
  overflow: hidden;
  font-size: 12px;
  box-sizing: border-box;
  border: 1px solid white;
  user-select: none;
  touch-action: none;
  color: white;
`,TimePointDiv=styled_components_browser_esm.ZP.div.attrs((props=>({style:{left:props.$left}})))`
  position: absolute;
  touch-action: none;
  pointer-events: none;
  border-left: 1px solid gray;
  height: 4px;
  bottom: 0px;
`;try{TimeView.displayName="TimeView",TimeView.__docgenInfo={description:"",displayName:"TimeView",props:{offsetSec:{defaultValue:null,description:"",name:"offsetSec",required:!0,type:{name:"number"}},pxPerSec:{defaultValue:null,description:"",name:"pxPerSec",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"number"}},steps:{defaultValue:null,description:"",name:"steps",required:!1,type:{name:"number[]"}},renderText:{defaultValue:null,description:"",name:"renderText",required:!1,type:{name:"((time: number) => string)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/TimeView/index.tsx#TimeView"]={docgenInfo:TimeView.__docgenInfo,name:"TimeView",path:"src/TimeView/index.tsx#TimeView"})}catch(__react_docgen_typescript_loader_error){}},"./src/hooks/useWidth.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{z:()=>useWidth});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function useWidth(deps=[]){const[width,setWidth]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(1),ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(!ref.current)return;const handleResize=()=>{ref.current&&setWidth(ref.current.clientWidth)};return window.addEventListener("resize",handleResize),()=>{window.removeEventListener("resize",handleResize)}}),[]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{ref.current&&ref.current.clientWidth!==width&&setWidth(ref.current.clientWidth)}),[ref,deps,width]),[width,ref]}try{useWidth.displayName="useWidth",useWidth.__docgenInfo={description:"",displayName:"useWidth",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/hooks/useWidth.tsx#useWidth"]={docgenInfo:useWidth.__docgenInfo,name:"useWidth",path:"src/hooks/useWidth.tsx#useWidth"})}catch(__react_docgen_typescript_loader_error){}}}]);
//# sourceMappingURL=TimeView-index-stories.e99052ca.iframe.bundle.js.map