"use strict";(self.webpackChunk_toshusai_app_ui=self.webpackChunk_toshusai_app_ui||[]).push([[914],{"./src/ToolBarMenu/ToolBarMenu.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Primary:()=>Primary,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_ToolBarMenu__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/ToolBarMenu/ToolBarMenu.tsx"),_Menu__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/Menu/index.ts"),_context_menu__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/context_menu/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__={component:_ToolBarMenu__WEBPACK_IMPORTED_MODULE_1__.S,argTypes:{}},Primary={args:{showMenu:!1,title:"Menu"},render:()=>{const[showMenu,setShowMenu]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[showMenu2,setShowMenu2]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{style:{position:"absolute"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(_ToolBarMenu__WEBPACK_IMPORTED_MODULE_1__.S,{title:"Menu",setShowMenu,showMenu,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_context_menu__WEBPACK_IMPORTED_MODULE_3__.E,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Menu__WEBPACK_IMPORTED_MODULE_2__.sN,{text:"Item 1"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_context_menu__WEBPACK_IMPORTED_MODULE_3__.E,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Menu__WEBPACK_IMPORTED_MODULE_2__.sN,{text:"Item 2"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_context_menu__WEBPACK_IMPORTED_MODULE_3__.E,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Menu__WEBPACK_IMPORTED_MODULE_2__.sN,{text:"Item 3"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(_Menu__WEBPACK_IMPORTED_MODULE_2__.rO,{title:"Item 4",setShowMenu:setShowMenu2,showMenu:showMenu2,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_context_menu__WEBPACK_IMPORTED_MODULE_3__.E,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Menu__WEBPACK_IMPORTED_MODULE_2__.sN,{text:"Item 1"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_context_menu__WEBPACK_IMPORTED_MODULE_3__.E,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Menu__WEBPACK_IMPORTED_MODULE_2__.sN,{text:"Item 2"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_context_menu__WEBPACK_IMPORTED_MODULE_3__.E,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Menu__WEBPACK_IMPORTED_MODULE_2__.sN,{text:"Item 3"})})]})]})})}};Primary.parameters={...Primary.parameters,docs:{...Primary.parameters?.docs,source:{originalSource:'{\n  args: {\n    showMenu: false,\n    title: "Menu"\n  },\n  render: () => {\n    const [showMenu, setShowMenu] = useState(false);\n    const [showMenu2, setShowMenu2] = useState(false);\n    return <div style={{\n      position: "absolute"\n    }}>\n        <ToolBarMenu title="Menu" setShowMenu={setShowMenu} showMenu={showMenu}>\n          <StyledContextMenuButton>\n            <MenuItem text="Item 1" />\n          </StyledContextMenuButton>\n          <StyledContextMenuButton>\n            <MenuItem text="Item 2" />\n          </StyledContextMenuButton>\n          <StyledContextMenuButton>\n            <MenuItem text="Item 3" />\n          </StyledContextMenuButton>\n\n          <MenuWithClildren title="Item 4" setShowMenu={setShowMenu2} showMenu={showMenu2}>\n            <StyledContextMenuButton>\n              <MenuItem text="Item 1" />\n            </StyledContextMenuButton>\n            <StyledContextMenuButton>\n              <MenuItem text="Item 2" />\n            </StyledContextMenuButton>\n            <StyledContextMenuButton>\n              <MenuItem text="Item 3" />\n            </StyledContextMenuButton>\n          </MenuWithClildren>\n        </ToolBarMenu>\n      </div>;\n  }\n}',...Primary.parameters?.docs?.source}}};const __namedExportsOrder=["Primary"]},"./src/Menu/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{sN:()=>MenuItem,rO:()=>MenuWithClildren});var styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function MenuItemBase(props){return(0,jsx_runtime.jsxs)(Root,{children:[(0,jsx_runtime.jsxs)(Flex,{children:[props.leftIcon,(0,jsx_runtime.jsx)(MenuItemWrapper,{$hasLeftIcon:void 0!==props.leftIcon,children:props.text})]}),props.children]})}MenuItemBase.displayName="MenuItemBase";const Root=styled_components_browser_esm.ZP.div`
  display: flex;
  width: 100%;
  justify-content: space-between;
`,Flex=styled_components_browser_esm.ZP.div`
  display: flex;
  gap: 2px;
`,MenuItemWrapper=styled_components_browser_esm.ZP.div`
  padding-left: ${props=>props.$hasLeftIcon?0:12}px;
  padding-right: 8px;
`;try{MenuItemBase.displayName="MenuItemBase",MenuItemBase.__docgenInfo={description:"",displayName:"MenuItemBase",props:{leftIcon:{defaultValue:null,description:"",name:"leftIcon",required:!1,type:{name:"ReactNode"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Menu/MenuItemBase.tsx#MenuItemBase"]={docgenInfo:MenuItemBase.__docgenInfo,name:"MenuItemBase",path:"src/Menu/MenuItemBase.tsx#MenuItemBase"})}catch(__react_docgen_typescript_loader_error){}const MenuItemShortcut=styled_components_browser_esm.ZP.div`
  color: rgba(255, 255, 255, 0.5);
  display: flex;
  white-space: nowrap;
  justify-content: space-between;
  padding-right: 12px;
`;function MenuItem(props){return(0,jsx_runtime.jsx)(MenuItemBase,{text:props.text,leftIcon:props.leftIcon,children:(0,jsx_runtime.jsx)(MenuItemShortcut,{children:props.shortcut})})}MenuItem.displayName="MenuItem";try{MenuItem.displayName="MenuItem",MenuItem.__docgenInfo={description:"",displayName:"MenuItem",props:{leftIcon:{defaultValue:null,description:"",name:"leftIcon",required:!1,type:{name:"ReactNode"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}},shortcut:{defaultValue:null,description:"",name:"shortcut",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Menu/MenuItem.tsx#MenuItem"]={docgenInfo:MenuItem.__docgenInfo,name:"MenuItem",path:"src/Menu/MenuItem.tsx#MenuItem"})}catch(__react_docgen_typescript_loader_error){}var react=__webpack_require__("./node_modules/react/index.js"),context_menu=__webpack_require__("./src/context_menu/index.ts"),Popover=__webpack_require__("./src/Popover/Popover.tsx"),iconProps=__webpack_require__("./src/iconProps.tsx"),react_dom=__webpack_require__("./node_modules/react-dom/index.js"),usePopover=__webpack_require__("./src/ToolBarMenu/usePopover.ts"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},__defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},IconArrowRight=((iconName,iconNamePascal,iconNode)=>{const Component=(0,react.forwardRef)(((_a,ref)=>{var a,_b=_a,{color="currentColor",size=24,stroke=2,children}=_b,rest=((source,exclude)=>{var target={};for(var prop in source)__hasOwnProp.call(source,prop)&&exclude.indexOf(prop)<0&&(target[prop]=source[prop]);if(null!=source&&__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(source))exclude.indexOf(prop)<0&&__propIsEnum.call(source,prop)&&(target[prop]=source[prop]);return target})(_b,["color","size","stroke","children"]);return(0,react.createElement)("svg",__spreadValues((a=__spreadValues({ref},defaultAttributes),__defProps(a,__getOwnPropDescs({width:size,height:size,stroke:color,strokeWidth:stroke,className:`tabler-icon tabler-icon-${iconName}`}))),rest),[...iconNode.map((([tag,attrs])=>(0,react.createElement)(tag,attrs))),...children||[]])}));return Component.propTypes={color:prop_types_default().string,size:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),stroke:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number])},Component.displayName=`${iconNamePascal}`,Component})("arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);function MenuWithClildren(props){const{showMenu,setShowMenu}=props,_id=(0,react.useRef)(null),onMouseEnter=(0,react.useCallback)((()=>{setShowMenu(!0),null!=_id.current&&(clearTimeout(_id.current),_id.current=null)}),[]),onMouseLeave=(0,react.useCallback)((()=>{_id.current=setTimeout((()=>{setShowMenu(!1),_id.current=null}),100)}),[setShowMenu]),ref=(0,react.useRef)(null),buttonRef=(0,react.useRef)(null);!function useKeyboardMenuHandler(ref,showMenu,setShowMenu,buttonRef){(0,react.useEffect)((()=>{if(showMenu){const focusableElements=getFocusableElements(ref.current);let index=-1;const handleKeyDown=e=>{if("Escape"===e.key)setShowMenu(!1);else if("Tab"===e.key)setShowMenu(!1);else if("ArrowDown"===e.key){if(!focusableElements)return;index++,index>=focusableElements?.length&&(index=0);const focusableElement=focusableElements?.[index];if(!(focusableElement&&focusableElement instanceof HTMLElement))return;focusableElement?.focus()}else if("ArrowUp"===e.key){if(!focusableElements)return;index--,index<0&&(index=focusableElements?.length-1);const focusableElement=focusableElements?.[index];if(!(focusableElement&&focusableElement instanceof HTMLElement))return;focusableElement?.focus()}else"ArrowLeft"===e.key&&(setShowMenu(!1),buttonRef?.current?.focus())},handleMouseDown=e=>{if(e.target instanceof HTMLElement){if(ref.current?.contains(e.target))return;setShowMenu(!1)}};return window.addEventListener("keydown",handleKeyDown),window.addEventListener("mousedown",handleMouseDown,{capture:!0}),()=>{window.removeEventListener("keydown",handleKeyDown),window.removeEventListener("mousedown",handleMouseDown)}}}),[buttonRef,ref,setShowMenu,showMenu])}(ref,showMenu,setShowMenu,buttonRef),(0,usePopover.S)(ref,buttonRef,showMenu,"right","top");const handleKeyDown=(0,react.useCallback)((e=>{"ArrowRight"===e.key&&(setShowMenu(!0),function tryRepeatUntilSuccess(func,interval,timeout){const startTime=Date.now(),id=setInterval((()=>{if(Date.now()-startTime>timeout)clearInterval(id);else try{func(),clearInterval(id)}catch(e){console.error(e)}}),interval)}((()=>{if(!ref.current)throw new Error("ref.current is null");const focusableElements=getFocusableElements(ref.current);if(!focusableElements)throw new Error("no focusable");const focusableElement=focusableElements?.[0];if(!(focusableElement&&focusableElement instanceof HTMLElement))throw new Error("no focusable");focusableElement?.focus()}),10,1e3))}),[ref,setShowMenu]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(context_menu.E,{ref:buttonRef,style:{display:"flex",position:"relative",whiteSpace:"nowrap"},onMouseEnter,onMouseLeave,onClick:onMouseEnter,onKeyDown:handleKeyDown,children:[(0,jsx_runtime.jsx)(MenuItemBase,{text:props.title,leftIcon:props.leftIcon,children:(0,jsx_runtime.jsx)(IconArrowRight,{...iconProps.U,color:"rgba(255, 255, 255, 0.5)",style:{...iconProps.U.style,marginRight:"",marginLeft:"auto"}})}),(0,jsx_runtime.jsx)("div",{style:{width:"5px",position:"absolute",right:"-5px",height:"100%"}})]}),showMenu&&(0,react_dom.createPortal)((0,jsx_runtime.jsx)(Popover.J,{onMouseEnter,onMouseLeave,ref,style:{position:"absolute"},children:props.children}),document.body)]})}function getFocusableElements(element){return element.querySelectorAll('a[href], button, textarea, input[type="text"], input[type="radio"], input[type="checkbox"], select')}try{MenuWithClildren.displayName="MenuWithClildren",MenuWithClildren.__docgenInfo={description:"",displayName:"MenuWithClildren",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},leftIcon:{defaultValue:null,description:"",name:"leftIcon",required:!1,type:{name:"ReactNode"}},showMenu:{defaultValue:null,description:"",name:"showMenu",required:!0,type:{name:"boolean"}},setShowMenu:{defaultValue:null,description:"",name:"setShowMenu",required:!0,type:{name:"(showMenu: boolean) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Menu/MenuWithClildren.tsx#MenuWithClildren"]={docgenInfo:MenuWithClildren.__docgenInfo,name:"MenuWithClildren",path:"src/Menu/MenuWithClildren.tsx#MenuWithClildren"})}catch(__react_docgen_typescript_loader_error){}},"./src/Popover/Popover.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>Popover});var styled_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_GlobalStyle__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/GlobalStyle/index.ts");const Popover=styled_components__WEBPACK_IMPORTED_MODULE_1__.ZP.div`
  display: flex;
  flex-direction: column;
  position: absolute;
  z-index: 10000;
  top: 16px;
  left: 0;
  background-color: var(${_GlobalStyle__WEBPACK_IMPORTED_MODULE_0__.kI});
  border: 1px solid var(${_GlobalStyle__WEBPACK_IMPORTED_MODULE_0__.Eu});
  border-radius: 4px;
  padding: 4px;
  box-shadow: 0px 0px 4px 0px var(${_GlobalStyle__WEBPACK_IMPORTED_MODULE_0__.v5});
  white-space: nowrap;
`;try{Popover.displayName="Popover",Popover.__docgenInfo={description:"",displayName:"Popover",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"RefObject<HTMLDivElement> | ((instance: HTMLDivElement | null) => void) | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"any"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Popover/Popover.tsx#Popover"]={docgenInfo:Popover.__docgenInfo,name:"Popover",path:"src/Popover/Popover.tsx#Popover"})}catch(__react_docgen_typescript_loader_error){}},"./src/ToolBarMenu/ToolBarButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>ToolBarButton});var styled_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_GlobalStyle__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/GlobalStyle/index.ts");const ToolBarButton=styled_components__WEBPACK_IMPORTED_MODULE_1__.ZP.button`
  background-color: var(${_GlobalStyle__WEBPACK_IMPORTED_MODULE_0__.v5});
  color: var(--color-text);
  border: 0;
  padding: 2px 8px;
  height: 16px;
  font-size: 12px;
  font-family: "Ricty Diminished";
  cursor: pointer;
  :hover {
    background-color: var(${_GlobalStyle__WEBPACK_IMPORTED_MODULE_0__.kI});
  }
`;try{ToolBarButton.displayName="ToolBarButton",ToolBarButton.__docgenInfo={description:"",displayName:"ToolBarButton",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLButtonElement | null) => void) | RefObject<HTMLButtonElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"any"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ToolBarMenu/ToolBarButton.tsx#ToolBarButton"]={docgenInfo:ToolBarButton.__docgenInfo,name:"ToolBarButton",path:"src/ToolBarMenu/ToolBarButton.tsx#ToolBarButton"})}catch(__react_docgen_typescript_loader_error){}},"./src/ToolBarMenu/ToolBarMenu.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>ToolBarMenu});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_ToolBarButton__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/ToolBarMenu/ToolBarButton.tsx"),_Popover_Popover__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/Popover/Popover.tsx"),react_dom__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react-dom/index.js"),_usePopover__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/ToolBarMenu/usePopover.ts"),_useKeyboardMenuHandler__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/ToolBarMenu/useKeyboardMenuHandler.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react/jsx-runtime.js");function ToolBarMenu(props){const{showMenu,setShowMenu}=props,ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),buttonRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);return(0,_useKeyboardMenuHandler__WEBPACK_IMPORTED_MODULE_5__.Q)(ref,showMenu,setShowMenu,buttonRef),(0,_usePopover__WEBPACK_IMPORTED_MODULE_4__.S)(ref,buttonRef,showMenu,"bottom","left"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_ToolBarButton__WEBPACK_IMPORTED_MODULE_1__.D,{ref:buttonRef,onClick:()=>{setShowMenu(!showMenu)},children:props.title}),showMenu&&(0,react_dom__WEBPACK_IMPORTED_MODULE_3__.createPortal)((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_Popover_Popover__WEBPACK_IMPORTED_MODULE_2__.J,{ref,children:props.children}),document.body)]})}try{ToolBarMenu.displayName="ToolBarMenu",ToolBarMenu.__docgenInfo={description:"",displayName:"ToolBarMenu",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},showMenu:{defaultValue:null,description:"",name:"showMenu",required:!0,type:{name:"boolean"}},setShowMenu:{defaultValue:null,description:"",name:"setShowMenu",required:!0,type:{name:"(showMenu: boolean) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ToolBarMenu/ToolBarMenu.tsx#ToolBarMenu"]={docgenInfo:ToolBarMenu.__docgenInfo,name:"ToolBarMenu",path:"src/ToolBarMenu/ToolBarMenu.tsx#ToolBarMenu"})}catch(__react_docgen_typescript_loader_error){}},"./src/ToolBarMenu/useKeyboardMenuHandler.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>useKeyboardMenuHandler});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function useKeyboardMenuHandler(ref,showMenu,setShowMenu,buttonRef){(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(showMenu){const focusableElements=ref.current?.querySelectorAll('a[href], button, textarea, input[type="text"], input[type="radio"], input[type="checkbox"], select');let index=-1;const handleKeyDown=e=>{if("Escape"===e.key)setShowMenu(!1);else if("Tab"===e.key)setShowMenu(!1),buttonRef.current&&buttonRef.current.focus();else if("ArrowDown"===e.key){if(!focusableElements)return;index++,index>=focusableElements?.length&&(index=0);const focusableElement=focusableElements?.[index];if(!(focusableElement&&focusableElement instanceof HTMLElement))return;focusableElement?.focus()}else if("ArrowUp"===e.key){if(!focusableElements)return;index--,index<0&&(index=focusableElements?.length-1);const focusableElement=focusableElements?.[index];if(!(focusableElement&&focusableElement instanceof HTMLElement))return;focusableElement?.focus()}},handleMouseDown=e=>{if(e.target instanceof HTMLElement){if(ref.current?.contains(e.target))return;if(buttonRef.current?.contains(e.target))return;setShowMenu(!1)}};return window.addEventListener("keydown",handleKeyDown),window.addEventListener("mousedown",handleMouseDown,{capture:!0}),()=>{window.removeEventListener("keydown",handleKeyDown),window.removeEventListener("mousedown",handleMouseDown)}}}),[buttonRef,ref,setShowMenu,showMenu])}},"./src/ToolBarMenu/usePopover.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>usePopover});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function usePopover(ref,parentRef,show,position1,position2){(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(show&&ref.current&&parentRef.current){const rect=parentRef.current.getBoundingClientRect(),tryPositions=[`${position1}-${position2}`];"left"===position1?tryPositions.push(`right-${position2}`):"right"===position1?tryPositions.push(`left-${position2}`):"top"===position1?tryPositions.push(`bottom-${position2}`):"bottom"===position1&&tryPositions.push(`top-${position2}`),"left"===position2?tryPositions.push(`${position1}-right`):"right"===position2?tryPositions.push(`${position1}-left`):"top"===position2?tryPositions.push(`${position1}-bottom`):"bottom"===position2&&tryPositions.push(`${position1}-top`);for(const position of tryPositions){let finalLeft="0",finalTop="0";"bottom-left"===position?(finalLeft=`${rect.left}px`,finalTop=`${rect.bottom}px`):"bottom-right"===position?(finalLeft=rect.right-ref.current.clientWidth+"px",finalTop=`${rect.bottom}px`):"top-left"===position?(finalLeft=`${rect.left}px`,finalTop=rect.top-ref.current.clientHeight+"px"):"top-right"===position?(finalLeft=rect.right-ref.current.clientWidth+"px",finalTop=rect.top-ref.current.clientHeight+"px"):"left-top"===position?(finalLeft=rect.left-ref.current.clientWidth+"px",finalTop=`${rect.top}px`):"left-bottom"===position?(finalLeft=rect.left-ref.current.clientWidth+"px",finalTop=rect.bottom-ref.current.clientHeight+"px"):"right-top"===position?(finalLeft=`${rect.right}px`,finalTop=`${rect.top}px`):"right-bottom"===position&&(finalLeft=`${rect.right}px`,finalTop=rect.bottom-ref.current.clientHeight+"px");let isOverflow=!1;if(finalLeft.startsWith("-")&&(isOverflow=!0,finalLeft="0px"),parseInt(finalLeft)+ref.current.clientWidth>window.innerWidth&&(isOverflow=!0,finalLeft=window.innerWidth-ref.current.clientWidth+"px"),parseInt(finalTop)+ref.current.clientHeight>window.innerHeight&&(isOverflow=!0,finalTop=window.innerHeight-ref.current.clientHeight+"px"),finalTop.startsWith("-")&&(isOverflow=!0,finalTop="0px"),!isOverflow){ref.current.style.left=finalLeft,ref.current.style.top=finalTop;break}}}}),[parentRef,ref,show])}},"./src/context_menu/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>StyledContextMenuButton});__webpack_require__("./node_modules/react/index.js");var styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),GlobalStyle=__webpack_require__("./src/GlobalStyle/index.ts");__webpack_require__("./node_modules/react/jsx-runtime.js");const StyledDiv=styled_components_browser_esm.ZP.div.attrs((p=>({style:{left:p.x+"px",top:p.y+"px"}})))`
  position: fixed;
  background-color: var(${GlobalStyle.v5});
  border: 1px solid var(${GlobalStyle.Eu});
  color: var(--color-text);
  font-size: 12px;
  line-height: 12px;
  border-radius: 4px;
  padding: 4px 4px;
  z-index: 10000;
`,ContextMenu=props=>{const ref=useRef(null);if(!props.show)return null;const mouseDown=e=>{ref.current?.contains(e.target)||(props.onClose(),window.removeEventListener("mousedown",mouseDown))};return window.addEventListener("mousedown",mouseDown),_jsxs(_Fragment,{children:[_jsx(Overlay,{}),_jsx(StyledDiv,{x:props.e?.pageX??0,y:props.e?.pageY||0,ref,children:props.children})]})},Overlay=styled_components_browser_esm.ZP.div`
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: 1000;
  background-color: rgba(0, 0, 0, 0.1);
`;try{ContextMenu.displayName="ContextMenu",ContextMenu.__docgenInfo={description:"",displayName:"ContextMenu",props:{show:{defaultValue:null,description:"",name:"show",required:!0,type:{name:"boolean"}},e:{defaultValue:null,description:"",name:"e",required:!1,type:{name:"MouseEvent<HTMLDivElement, MouseEvent>"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/context_menu/ContextMenu.tsx#ContextMenu"]={docgenInfo:ContextMenu.__docgenInfo,name:"ContextMenu",path:"src/context_menu/ContextMenu.tsx#ContextMenu"})}catch(__react_docgen_typescript_loader_error){}const StyledContextMenuButton=styled_components_browser_esm.ZP.button`
  border: none;
  background: transparent;
  margin: 0;
  display: flex;
  font-family: "Ricty Diminished";
  color: var(--color-text);
  font-size: 12px;
  line-height: 14px;
  height: 16px;
  cursor: pointer;
  padding: 2px 4px;
  border-radius: 2px;
  :hover {
    background-color: var(--color-primary);
    color: white;
  }
  :focus-visible {
    background-color: var(--color-primary);
  }
`;try{StyledContextMenuButton.displayName="StyledContextMenuButton",StyledContextMenuButton.__docgenInfo={description:"",displayName:"StyledContextMenuButton",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLButtonElement | null) => void) | RefObject<HTMLButtonElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"any"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/context_menu/StyledContextMenuButton.tsx#StyledContextMenuButton"]={docgenInfo:StyledContextMenuButton.__docgenInfo,name:"StyledContextMenuButton",path:"src/context_menu/StyledContextMenuButton.tsx#StyledContextMenuButton"})}catch(__react_docgen_typescript_loader_error){}},"./src/iconProps.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>iconProps});const iconProps={style:{margin:"auto"},strokeWidth:2,color:"white",size:12}}}]);
//# sourceMappingURL=ToolBarMenu-ToolBarMenu-stories.d47cd08b.iframe.bundle.js.map