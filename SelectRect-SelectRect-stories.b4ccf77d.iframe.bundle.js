"use strict";(self.webpackChunk_toshusai_app_ui=self.webpackChunk_toshusai_app_ui||[]).push([[8],{"./src/SelectRect/SelectRect.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:()=>Basic,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _SelectRect__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/SelectRect/SelectRect.tsx"),_hooks__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/hooks/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__={component:_SelectRect__WEBPACK_IMPORTED_MODULE_0__.F},Basic={render:args=>{const{handleMouseDownForSelect,rect}=(0,_hooks__WEBPACK_IMPORTED_MODULE_1__.l)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{onMouseDown:handleMouseDownForSelect,style:{width:"100%",height:"256px",border:"1px solid var(--color-border)",position:"relative",overflow:"hidden",textAlign:"center",lineHeight:"256px",userSelect:"none"},children:["drag to select",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_SelectRect__WEBPACK_IMPORTED_MODULE_0__.F,{$height:rect?.height??0,$width:rect?.width??0,$left:rect?.left??0,$top:rect?.top??0})]})}};Basic.parameters={...Basic.parameters,docs:{...Basic.parameters?.docs,source:{originalSource:'{\n  render: args => {\n    const {\n      handleMouseDownForSelect,\n      rect\n    } = useSelectRect();\n    return <div onMouseDown={handleMouseDownForSelect} style={{\n      width: "100%",\n      height: "256px",\n      border: "1px solid var(--color-border)",\n      position: "relative",\n      overflow: "hidden",\n      textAlign: "center",\n      lineHeight: "256px",\n      userSelect: "none"\n    }}>\n        drag to select\n        <SelectRectDiv $height={rect?.height ?? 0} $width={rect?.width ?? 0} $left={rect?.left ?? 0} $top={rect?.top ?? 0} />\n      </div>;\n  }\n}',...Basic.parameters?.docs?.source}}};const __namedExportsOrder=["Basic"]},"./src/SelectRect/SelectRect.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>SelectRectDiv});const SelectRectDiv=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js").ZP.div.attrs((props=>({style:{left:props.$left+"px",width:props.$width+"px",top:props.$top+"px",height:props.$height+"px"}})))`
  position: absolute;
  background: rgba(110, 132, 255, 0.557);
  pointer-events: none;
`;try{SelectRectDiv.displayName="SelectRectDiv",SelectRectDiv.__docgenInfo={description:"",displayName:"SelectRectDiv",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"RefObject<HTMLDivElement> | ((instance: HTMLDivElement | null) => void) | null"}},$left:{defaultValue:null,description:"",name:"$left",required:!0,type:{name:"number"}},$width:{defaultValue:null,description:"",name:"$width",required:!0,type:{name:"number"}},$top:{defaultValue:null,description:"",name:"$top",required:!0,type:{name:"number"}},$height:{defaultValue:null,description:"",name:"$height",required:!0,type:{name:"number"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"any"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/SelectRect/SelectRect.tsx#SelectRectDiv"]={docgenInfo:SelectRectDiv.__docgenInfo,name:"SelectRectDiv",path:"src/SelectRect/SelectRect.tsx#SelectRectDiv"})}catch(__react_docgen_typescript_loader_error){}},"./src/hooks/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>useSelectRect});__webpack_require__("./src/hooks/useWidth.tsx");var react=__webpack_require__("./node_modules/react/index.js"),utils=__webpack_require__("./src/utils/index.ts");function useSelectRect(onUnselect){const[rect,setRect]=(0,react.useState)(null),handleMouseDownForSelect=(0,utils.K1)((({diffX,diffY,startEvent,pass})=>{const rect=startEvent.target.getBoundingClientRect();if(!pass)return;let left=startEvent.clientX-rect.left+pass.scrollLeft,top=startEvent.clientY-rect.top+pass.scrollTop,width=diffX,height=diffY;width<0&&(left+=width,width=-width),height<0&&(top+=height,height=-height),setRect({left,top,width,height})}),(({startEvent})=>{const el=startEvent.target;return{scrollLeft:el.scrollLeft,scrollTop:el.scrollTop}}),(ctx=>{setRect(null),0===ctx.diffX&&0===ctx.diffY&&onUnselect?.()}));return{handleMouseDownForSelect,rect}}try{useSelectRect.displayName="useSelectRect",useSelectRect.__docgenInfo={description:"",displayName:"useSelectRect",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/hooks/useSelectRect.tsx#useSelectRect"]={docgenInfo:useSelectRect.__docgenInfo,name:"useSelectRect",path:"src/hooks/useSelectRect.tsx#useSelectRect"})}catch(__react_docgen_typescript_loader_error){}},"./src/hooks/useWidth.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{z:()=>useWidth});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function useWidth(deps=[]){const[width,setWidth]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(1),ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(!ref.current)return;const handleResize=()=>{ref.current&&setWidth(ref.current.clientWidth)};return window.addEventListener("resize",handleResize),()=>{window.removeEventListener("resize",handleResize)}}),[]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{ref.current&&ref.current.clientWidth!==width&&setWidth(ref.current.clientWidth)}),[ref,deps,width]),[width,ref]}try{useWidth.displayName="useWidth",useWidth.__docgenInfo={description:"",displayName:"useWidth",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/hooks/useWidth.tsx#useWidth"]={docgenInfo:useWidth.__docgenInfo,name:"useWidth",path:"src/hooks/useWidth.tsx#useWidth"})}catch(__react_docgen_typescript_loader_error){}},"./src/utils/getDragHandler.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>getDragHandler,z:()=>useDragHandler});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function useDragHandler(cb,onDown,onUp){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>getDragHandler(cb,onDown,onUp)),[cb,onDown,onUp])}function getDragHandler(cb,onDown,onUp){return downEvent=>{const pass=onDown?.({startX:0,startY:0,diffX:0,diffY:0,startEvent:downEvent.nativeEvent,event:downEvent.nativeEvent});downEvent.stopPropagation();const startX=downEvent.clientX,startY=downEvent.clientY;let movePass;const handleMouseMove=e=>{const diffX=e.clientX-startX,diffY=e.clientY-startY;movePass=cb({startX,startY,diffX,diffY,startEvent:downEvent.nativeEvent,pass,event:e})},handleMouseUp=e=>{const diffX=e.clientX-startX,diffY=e.clientY-startY;onUp?.({startX,startY,diffX,diffY,startEvent:e,pass,movePass,event:e}),window.removeEventListener("mousemove",handleMouseMove),window.removeEventListener("mouseup",handleMouseUp)};window.addEventListener("mousemove",handleMouseMove),window.addEventListener("mouseup",handleMouseUp)}}},"./src/utils/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K1:()=>_getDragHandler__WEBPACK_IMPORTED_MODULE_0__.K,zF:()=>_getDragHandler__WEBPACK_IMPORTED_MODULE_0__.z});var _getDragHandler__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/utils/getDragHandler.ts");__webpack_require__("./src/utils/useNativeOnChange.tsx")},"./src/utils/useNativeOnChange.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>useNativeOnChange});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function useNativeOnChange(propsValue,propsOnChange){const inputRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),[value,setValue]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(propsValue);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const onChange=e=>{const target=e.target;propsOnChange?.(target.value)};inputRef.current&&inputRef.current.addEventListener("change",onChange);const el=inputRef.current;return()=>{el?.removeEventListener("change",onChange)}}),[propsOnChange,propsValue]),{inputRef,value,setValue}}}}]);